# Core Libraries

Clipboard's shared `@clipboard-health/*` libraries. Check here before adding new dependencies or implementing functionality from scratch. For details on each library:

- For installed packages, check `node_modules/@clipboard-health/{LIBRARY_NAME}/README.md`
- For those not installed, use `gh api -H "Accept: application/vnd.github.raw" repos/ClipboardHealth/{core-utils OR cbh-core}/contents/packages/{LIBRARY_NAME}/README.md`

## Debugging

When a bug traces into a `@clipboard-health/*` library, read the source code in `node_modules/@clipboard-health/{LIBRARY_NAME}/` to find the root cause. Do not stop at the library boundary.

## core-utils

<!-- START: Auto-generated by ./populateLibraries.ts -->

- **ai-rules**: Pre-built AI agent rules for consistent coding standards.
- **analytics**: Type-safe analytics wrapper around our third-party analytics provider for user identification and event tracking.
- **background-jobs-adapter**: Minimal adapter interface for background jobs operations supporting Mongo and Postgres implementations.
- **config**: Type-safe static configuration management: a pure function to resolve, validate against a Zod schema, and freeze configuration values.
- **contract-core**: Shared Zod schemas for Clipboard's contracts.
- **embedex**: Embed shared text and code snippets from source files into destination files.
- **eslint-config**: Our ESLint configuration.
- **eslint-plugin**: Clipboard's ESLint Plugin
- **example-nestjs**: A NestJS application using our libraries, primarily for end-to-end testing.
- **execution-context**: A lightweight Node.js utility for managing execution contexts and metadata aggregation using AsyncLocalStorage.
- **json-api**: TypeScript-friendly utilities for adhering to the JSON:API specification.
- **json-api-nestjs**: TypeScript-friendly utilities for adhering to the JSON:API specification with NestJS.
- **mongo-jobs**: MongoDB-powered background jobs.
- **notifications**: Send notifications through third-party providers.
- **nx-plugin**: An Nx plugin with generators to manage libraries and applications.
- **phone-number**: Phone number utility functions.
- **playwright-reporter-llm**: Playwright reporter that outputs structured JSON for LLM agents. Minimal console output, flat schema, easy to filter to failures.
- **rules-engine**: A pure functional rules engine to keep logic-dense code simple, reliable, understandable, and explainable.
- **testing-core**: TypeScript-friendly testing utilities.
- **util-ts**: TypeScript utilities.

<!-- END: Auto-generated by ./populateLibraries.ts -->

## cbh-core

<!-- START: Auto-generated by cbh-core/populateLibraries.ts -->

- **api-nestjs**: NestJS API utilities.
- **auth**: Core authentication functionality.
- **auth-guard**: A NestJS guard decorator for authentication and authorization.
- **background-jobs-nestjs**: A NestJS integration for background jobs.
- **background-jobs-postgres**: Postgres-powered background jobs.
- **cli**: Clipboard Health's local development CLI.
- **context-logger**: Create logging scopes, add metadata, and get a single log message when the context is closed.
- **context-logger-nestjs**: Context-aware logging interceptor for NestJS apps.
- **datadog-tracer**: Clipboard Health's internal Datadog integration suite: decorators, NestJS interceptors, and helpers.
- **date-time**: Date and DateTime utility functions.
- **feature-flag-provider**: A LaunchDarkly feature flag wrapper with NestJS integration.
- **feature-flags**: A type-safe LaunchDarkly feature flag wrapper.
- **file-storage**: An AWS S3/Cloudfront wrapper with NestJS integration.
- **logger**: Winston-based logger with redaction.
- **logger-nestjs**: A NestJS integration for our logger.
- **message-consumer**: Message consumer `process` functionality to deserialize messages and provide Datadog tracing.
- **message-consumer-nestjs**: Consume SQS messages with NestJS decorators.
- **message-producer**: Message producer `publish` functionality to serialize messages, publish them to message brokers, and provide Datadog tracing.
- **money**: Helpers and a wrapper on top of Dinero v2.
- **node-clustering**: A simple and consistent way to cluster a Node.js application across multiple CPUs.
- **ssm-loader**: A script to populate secrets in a `.env` file with values from SSM.
- **testing**: Helpers for writing tests.
- **testing-auth**: Service test helpers for testing `auth` and `auth-guard` functionality.
- **testing-background-jobs-postgres**: Testing helpers for `@clipboard-health/background-jobs-postgres`.
- **testing-e2e-admin-app**: Utility functions and clients to test and interact with the Admin service.
- **testing-express**: Test helpers for ExpressJS.
- **testing-firebase-admin-v11**: Test helpers for Firebase Admin SDK v11.
- **testing-firebase-admin-v13**: Test helpers for Firebase Admin SDK v13.
- **testing-firebase-admin-v9**: Test helpers for Firebase Admin SDK v9.
- **testing-launchdarkly**: Test helpers for the LaunchDarkly client.
- **testing-launchdarkly-v6**: Test helpers for the LaunchDarkly client v6.
- **testing-launchdarkly-v7**: Test helpers for the LaunchDarkly client v7.
- **testing-mongodb**: Test helpers for working with MongoDB.
- **testing-nestjs**: Test helpers for NestJS.
- **testing-nodemailer**: Test helpers for working with Nodemailer.
- **testing-outgoing-http**: Test helpers for outgoing HTTP requests.
- **testing-prisma**: Test helpers for working with Prisma.
- **testing-protobuf**: Test helpers for Protobuf.
- **ui-components**: Clipboard's Material UI React components.
- **ui-react**: Reusable React UI Components, hooks, and utilities.
- **ui-theme**: Clipboard's Material UI theme.
- **util-api**: API utilities.
- **util-message**: Shared async messaging types and functions.
- **util-protobuf**: Protobuf utilities.
- **util-tracing**: Standard tracing types, tags and utils for packages that want to integrate with DataDog and tracing tools.

<!-- END: Auto-generated by cbh-core/populateLibraries.ts -->
